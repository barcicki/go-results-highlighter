!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.GoResultsHighlighter=e()}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var o="function"==typeof require&&require;if(!s&&o)return o(a,!0);if(l)return l(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var l="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=(0,l.asArray)(document.querySelectorAll("[go-results],[data-go-results]")),t=!0,r=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;o.goResultsHighlighter=new a["default"](o)}}catch(u){r=!0,n=u}finally{try{!t&&s["return"]&&s["return"]()}finally{if(r)throw n}}}Object.defineProperty(r,"__esModule",{value:!0});var l=e("./plugin"),a=n(l);"complete"===document.readyState?i():document.addEventListener("DOMContentLoaded",i,!1),r["default"]=a["default"],t.exports=r["default"]},{"./plugin":2}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return Array.prototype.slice.call(e)}function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var i=r.filter(function(e){return"object"==typeof e}).reverse(),l={};e:for(var a in e){var s=!0,o=!1,u=void 0;try{for(var f,c=i[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var v=f.value;if(v.hasOwnProperty(a)){l[a]=v[a];continue e}}}catch(y){o=!0,u=y}finally{try{!s&&c["return"]&&c["return"]()}finally{if(o)throw u}}l[a]=e[a]}return l}function a(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({cls:r,regexp:new RegExp(e[r])});return t}function s(e){var t={},r=!0,n=!1,i=void 0;try{for(var l,a=h[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value,o=e.getAttribute(d+s);o||(o=e.getAttribute("data-"+d+s)),o&&(t[s]=o)}}catch(u){n=!0,i=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw i}}return t}function o(e,t){e.setAttribute(v,t)}function u(e,t){var r=i(e.querySelectorAll(t.rowTags)),n=a(t.results),l={},s=void 0,u=void 0;return r.forEach(function(e,r){if(!(r<t.row)){var a=i(e.querySelectorAll(t.cellTags)),f=-1;if(!a.length||!a[t.column])return o(e,f);var c=parseInt(a[t.column].textContent,10);if(u)f=u+1;else{if(isNaN(c))return o(e,f);f=c||1}c?s>=c&&(c=s):c=s?s:1;var v={place:c,row:e,games:{},opponents:[]};return a.forEach(function(e){var t=!0,r=!1,i=void 0;try{for(var l,a=n[Symbol.iterator]();!(t=(l=a.next()).done);t=!0){var s=l.value,o=e.textContent.match(s.regexp);if(o){var u=Number(o[1]);e.setAttribute(y,u),v.games[u]={cell:e,cls:s.cls},v.opponents.push(u)}}}catch(f){r=!0,i=f}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw i}}}),v.opponents.sort(function(e,t){return e>t?1:-1}),l[f]=v,s=c,u=f,o(e,f)}}),l}Object.defineProperty(r,"__esModule",{value:!0});var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.asArray=i,r.defaults=l,r.readDomSettings=s,r.mapRowsToPlayers=u;var c={prefixCls:"go-results-",tableCls:"table",gameCls:"game",currentCls:"current",overlayCls:"overlay",results:{won:"([0-9]+)\\+",lost:"([0-9]+)\\-",jigo:"([0-9]+)=",unresolved:"([0-9]+)\\?"},row:0,column:0,rowTags:"tr",cellTags:"td,th",hovering:!0,clicking:!0};r.DEFAULT_SETTINGS=c;var v="data-go-place",y="data-go-opponent-place",d="go-results-",h=["column","row"],p=function(){function e(t,r){n(this,e),this.element=t,this.element.classList&&(this.settings=l(c,s(t),r),this.createPlayersMap(),this.initOverlay(),this.bindEvents(),this.element.classList.add(this.settings.prefixCls+this.settings.tableCls))}return f(e,[{key:"createPlayersMap",value:function(){this.map=u(this.element,this.settings),this.players=[];for(var e in this.map)this.map.hasOwnProperty(e)&&this.players.push(this.map[e])}},{key:"initOverlay",value:function(){this.overlay=document.createElement("div"),this.overlay.classList.add(this.settings.prefixCls+this.settings.overlayCls),this.overlay.style.display="none",this.overlay.appendChild(this.element.cloneNode()),this.element.appendChild(this.overlay),this.isOverlayVisible=!1}},{key:"showOverlay",value:function(){this.overlay.style.display="block",this.isOverlayVisible=!0}},{key:"hideOverlay",value:function(){this.overlay.style.display="none",this.isOverlayVisible=!1}},{key:"selectPlayer",value:function(e,t){function r(e,t){var r=t?"add":"remove";e.row.classList[r](n);var i=!0,l=!1,a=void 0;try{for(var s,o=e.opponents[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var u=s.value,f=this.map[u];f.row.classList[r](this.settings.prefixCls+e.games[u].cls)}}catch(c){l=!0,a=c}finally{try{!i&&o["return"]&&o["return"]()}finally{if(l)throw a}}}var n=this.settings.prefixCls+this.settings.currentCls,l=this.settings.prefixCls+this.settings.gameCls,a=this.map[e],s=i(this.element.querySelectorAll("."+l)),o=this.element.querySelector("."+n),u=o?o.getAttribute(v):null,f=u?this.map[u]:null,c=!0,y=!1,d=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;g.classList.remove(l)}}catch(m){y=!0,d=m}finally{try{!c&&p["return"]&&p["return"]()}finally{if(y)throw d}}f&&f!==a&&r.call(this,f,!1),a&&a!==f&&r.call(this,a,!0),a&&t&&(a.games[t].cell.classList.add(l),this.map[t].games[e].cell.classList.add(l))}},{key:"showDetails",value:function(e){var t=this.map[e];if(!t)return void this.hideOverlay();var r=this.overlay.firstChild,n=t.row.cloneNode(!0);n.classList.add(this.settings.prefixCls+this.settings.currentCls);var l=!1;r.innerHTML="";var a=!0,s=!1,o=void 0;try{for(var u,f=t.opponents[Symbol.iterator]();!(a=(u=f.next()).done);a=!0){var c=u.value;!l&&c>e&&(r.appendChild(n),l=!0);var v=this.map[c].row.cloneNode(!0);v.classList.add(this.settings.prefixCls+t.games[c].cls),r.appendChild(v)}}catch(d){s=!0,o=d}finally{try{!a&&f["return"]&&f["return"]()}finally{if(s)throw o}}l||r.appendChild(n);var h=this.settings.prefixCls+this.settings.gameCls,p=i(r.querySelectorAll("."+h)),g=i(r.querySelectorAll("["+y+'="'+e+'"]')),m=!0,b=!1,w=void 0;try{for(var x,C=p[Symbol.iterator]();!(m=(x=C.next()).done);m=!0){var S=x.value;S.classList.remove(h)}}catch(d){b=!0,w=d}finally{try{!m&&C["return"]&&C["return"]()}finally{if(b)throw w}}var L=!0,A=!1,O=void 0;try{for(var E,T=g[Symbol.iterator]();!(L=(E=T.next()).done);L=!0){var S=E.value;S.classList.add(h)}}catch(d){A=!0,O=d}finally{try{!L&&T["return"]&&T["return"]()}finally{if(A)throw O}}this.showOverlay(),r.style.top=t.row.offsetTop-n.offsetTop+"px"}},{key:"bindEvents",value:function(){var e=this;this.element.addEventListener("click",function(t){if(e.settings.clicking!==!1){e.isOverlayVisible&&e.hideOverlay();for(var r=t.target,n=null;r&&r!==document;){var i=r.getAttribute(v);if(i){n=i;break}r=r.parentNode}n&&e.showDetails(n)}}),this.overlay.addEventListener("click",function(t){e.hideOverlay(),t.stopPropagation()}),this.element.addEventListener("mouseover",function(t){if(e.settings.hovering!==!1&&!e.isOverlayVisible){for(var r=t.target,n=null,i=null;r&&r!==document;){var l=r.getAttribute(y),a=r.getAttribute(v);if(l&&(n=l),a){i=a;break}r=r.parentNode}i&&e.selectPlayer(i,n)}},!1),this.element.addEventListener("mouseout",function(t){if(e.settings.hovering!==!1){for(var r=t.relatedTarget;r&&r!==document&&r!==e.element;)r=r.parentNode;r!==e.element&&e.selectPlayer(-1)}},!1)}}]),e}();r["default"]=p,p.DEFAULT_SETTINGS=c},{}]},{},[1])(1)});