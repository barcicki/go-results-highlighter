(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.GoResultsHighlighter=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _plugin=require("./plugin");var _plugin2=_interopRequireDefault(_plugin);function initialize(){var resultElements=(0,_plugin.asArray)(document.querySelectorAll("[go-results],[data-go-results]"));var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=resultElements[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var tableEl=_step.value;tableEl.goResultsHighlighter=new _plugin2["default"](tableEl)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}console.log("Initialized")}if(document.readyState==="complete"){initialize()}else{document.addEventListener("DOMContentLoaded",initialize,false)}exports["default"]=_plugin2["default"];module.exports=exports["default"]},{"./plugin":2}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.asArray=asArray;exports.defaults=defaults;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var DEFAULT_SETTINGS={prefixCls:"go-results-",gameCls:"game",currentCls:"current",results:{won:"([0-9]+)\\+",lost:"([0-9]+)\\-",jigo:"([0-9]+)=",unresolved:"([0-9]+)\\?"},rowTags:"tr",cellTags:"td,th"};function asArray(arrayLike){return Array.prototype.slice.call(arrayLike)}function defaults(obj,defaultObj){if(typeof obj!=="object"){return Object.assign({},defaultObj)}return Object.assign({},defaultObj,obj)}function mapResultsSettings(results){var map=[];for(var cls in results){if(results.hasOwnProperty(cls)){map.push({cls:cls,regexp:new RegExp(results[cls])})}}return map}function mapRowsToPlayers(table,settings){var rows=asArray(table.querySelectorAll(settings.rowTags));var resultsMap=mapResultsSettings(settings.results);var results=[];var lastPlace=undefined;rows.forEach(function(row){var cells=asArray(row.querySelectorAll(settings.cellTags));row.goResultPlace=-1;if(!cells.length){return}var place=parseInt(cells[0].textContent,10);if(isNaN(place)&&!lastPlace){return}if(!place){place=lastPlace?lastPlace+1:1}else if(place<=lastPlace){place=lastPlace+1}var player={place:place,row:row,games:{},opponents:[]};cells.forEach(function(cell){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=resultsMap[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var result=_step.value;var match=cell.textContent.match(result.regexp);if(!match){continue}var opponentPlace=match[1];cell.goOpponentPlace=opponentPlace;player.games[opponentPlace]={cell:cell,cls:result.cls};player.opponents.push(opponentPlace)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}});row.goResultPlace=place;lastPlace=place;results[place]=player});return results}var GoResultsHighlighter=function(){function GoResultsHighlighter(element,settings){_classCallCheck(this,GoResultsHighlighter);this.element=element;this.settings=defaults(settings,DEFAULT_SETTINGS);this.map=mapRowsToPlayers(this.element,this.settings);this.bindEvents()}_createClass(GoResultsHighlighter,[{key:"selectPlayer",value:function selectPlayer(playerPlace,opponentPlace){var currentCls=this.settings.prefixCls+this.settings.currentCls;var gameCls=this.settings.prefixCls+this.settings.gameCls;var player=this.map[playerPlace];var markedGames=asArray(this.element.querySelectorAll("."+gameCls));var markedRow=this.element.querySelector("."+currentCls);var markedPlayer=markedRow&&markedRow.goResultPlace?this.map[markedRow.goResultPlace]:null;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=markedGames[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var gameCell=_step2.value;gameCell.classList.remove(gameCls)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}if(markedPlayer&&markedPlayer!==player){mark.call(this,markedPlayer,false)}if(player&&player!==markedPlayer){mark.call(this,player,true)}if(player&&opponentPlace){player.games[opponentPlace].cell.classList.add(gameCls);this.map[opponentPlace].games[playerPlace].cell.classList.add(gameCls)}function mark(player,active){var method=active?"add":"remove";player.row.classList[method](currentCls);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=player.opponents[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _opponentPlace=_step3.value;var opponent=this.map[_opponentPlace];opponent.row.classList[method](this.settings.prefixCls+player.games[_opponentPlace].cls)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}}},{key:"bindEvents",value:function bindEvents(){var _this=this;this.element.addEventListener("mouseover",function(event){var target=event.target;var opponent=null;var player=null;while(target&&target!==document){if(target.goOpponentPlace){opponent=target.goOpponentPlace}if(target.goResultPlace){player=target.goResultPlace;break}target=target.parentNode}if(!player){return}_this.selectPlayer(player,opponent)},false);this.element.addEventListener("mouseout",function(event){var target=event.relatedTarget;while(target&&target!==document&&target!==_this.element){target=target.parentNode}if(target!==_this.element){_this.selectPlayer(-1)}},false)}}]);return GoResultsHighlighter}();exports["default"]=GoResultsHighlighter;GoResultsHighlighter.DEFAULT_SETTINGS=DEFAULT_SETTINGS},{}]},{},[1])(1)});