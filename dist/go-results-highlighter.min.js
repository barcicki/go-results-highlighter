!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.GoResultsHighlighter=t()}}(function(){return function t(e,r,n){function s(o,a){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return s(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(){var t=(0,l.asArray)(document.querySelectorAll("["+a.DOM_ATTRIBUTES.RESULT_TABLE+"]"));t.forEach(function(t){t.goResultsHighlighter=new o["default"](t)})}Object.defineProperty(r,"__esModule",{value:!0});var i=t("./plugin"),o=n(i),a=t("./settings"),l=t("./utils");"complete"===document.readyState?s():document.addEventListener("DOMContentLoaded",s,!1),"undefined"!=typeof jQuery&&(jQuery.fn.goResultsHighlighter=function(t){return this.each(function(e,r){$(r).data("GoResultsHighlighter",new o["default"](r,t))}),this}),r["default"]=o["default"],e.exports=r["default"]},{"./plugin":3,"./settings":5,"./utils":6}],2:[function(t,e,r){"use strict";function n(t,e){t.setAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT,e)}function s(t,e){function r(t,e){"string"==typeof s.roundsColumns&&(e=s.roundsColumns.split(",").map(function(t){return e[Number(t)]})),e.forEach(function(e){var r=void 0,n=void 0;if(e.hasAttribute(o.DOM_ATTRIBUTES.GAME_RESULT)&&e.hasAttribute(o.DOM_ATTRIBUTES.OPPONENT_PLACEMENT))r=Number(e.getAttribute(o.DOM_ATTRIBUTES.OPPONENT_PLACEMENT)),n=e.getAttribute(o.DOM_ATTRIBUTES.GAME_RESULT);else{for(var s=0;u>s;s++){var i=e.textContent.match(l[s].regexp);i&&(r=Number(i[1]),n=l[s].cls,e.setAttribute(o.DOM_ATTRIBUTES.OPPONENT_PLACEMENT,r),e.setAttribute(o.DOM_ATTRIBUTES.GAME_RESULT,l[s].cls))}if(!r)return}t.games[r]={cell:e,cls:n},t.opponents.push(r)})}var s=(0,i.defaults)(o.DEFAULT_SETTINGS,e),a=(0,i.asArray)(t.querySelectorAll(s.rowTags)),l=(0,o.toResultsWithRegExp)(s.results),u=l.length,f={},c=void 0,T=void 0;return a.forEach(function(t,e){if(!(e<s.startingRow)){var a=(0,i.asArray)(t.querySelectorAll(s.cellTags)),l=-1;if(!a.length||!a[s.placeColumn])return void n(t,l);var u=parseInt(a[s.placeColumn].textContent,10),E={tournamentPlace:-1,row:t,games:{},opponents:[]};if(t.hasAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT))l=Number(t.getAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT));else{if(T)l=T+1;else{if(isNaN(u))return void n(t,l);l=u||1}u?c>=u&&(u=c):u=c?c:1,n(t,l)}-1!=l&&(r(E,a),E.tournamentPlace=u,E.opponents.sort(function(t,e){return t>e?1:-1}),f[l]=E,c=u,T=l)}}),f}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=s;var i=t("./utils"),o=t("./settings");e.exports=r["default"]},{"./settings":5,"./utils":6}],3:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("./settings"),a=t("./parser"),l=n(a),u=t("./raw2table"),f=n(u),c=t("./utils"),T=function(){function t(e,r){if(s(this,t),this.settings=(0,c.defaults)(o.DEFAULT_SETTINGS,(0,o.readTableSettingsFromDOM)(e),r),e instanceof HTMLPreElement){var n=(0,f["default"])(e.innerHTML,r),i=e.parentNode;i.insertBefore(n,e),i.removeChild(e),this.element=n}else this.element=e;this.element.classList&&(this.createPlayersMap(),this.bindEvents(),this.element.classList.add(this.settings.prefixCls+this.settings.tableCls),this.showingDetails=!1)}return i(t,[{key:"createPlayersMap",value:function(){this.map=(0,l["default"])(this.element,this.settings),this.players=[];for(var t in this.map)this.map.hasOwnProperty(t)&&this.players.push(this.map[t])}},{key:"selectPlayer",value:function(t,e){function r(t,e){var r=this,n=e?"add":"remove";t.row.classList[n](s),t.opponents.forEach(function(e){var s=r.map[e];s.row.classList[n](r.settings.prefixCls+t.games[e].cls)})}var n=this,s=this.settings.prefixCls+this.settings.currentCls,i=this.settings.prefixCls+this.settings.gameCls,a=this.map[t],l=(0,c.asArray)(this.element.querySelectorAll("."+i)),u=this.element.querySelector("."+s),f=u?u.getAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT):null,T=f?this.map[f]:null;l.forEach(function(t){t.classList.remove(i)}),T&&T!==a&&r.call(this,T,!1),a&&a!==T&&r.call(this,a,!0),this.showingDetails?a.opponents.forEach(function(e){n.map[e].games[t].cell.classList.add(i)}):a&&e&&(a.games[e].cell.classList.add(i),this.map[e].games[t].cell.classList.add(i))}},{key:"restoreFullResults",value:function(){this.players.filter(function(t){return t.row.properNextSibling}).reverse().forEach(function(t){t.row.parentNode.insertBefore(t.row,t.row.properNextSibling),t.row.properNextSibling=null}),this.element.classList.remove(this.settings.prefixCls+this.settings.showingDetailsCls),this.showingDetails=!1}},{key:"showDetails",value:function(t){var e=this,r=this.map[t];if(r){var n=r.row.parentNode,s=r.row.nextSibling;r.opponents.forEach(function(i){var o=e.map[i];o.row.properNextSibling=o.row.nextSibling,t>i?n.insertBefore(o.row,r.row):(n.insertBefore(o.row,s),s=o.row.nextSibling)}),this.element.classList.add(this.settings.prefixCls+this.settings.showingDetailsCls),this.showingDetails=!0,this.selectPlayer(t)}}},{key:"bindEvents",value:function(){var t=this;this.element.addEventListener("click",function(e){if(t.settings.clicking!==!1){for(var r=e.target,n=null;r&&r!==document;){var s=r.getAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT);if(s){n=s;break}r=r.parentNode}if(n){var i=void 0;if(t.showingDetails?r.properNextSibling?(i=r.getBoundingClientRect().top,t.restoreFullResults(),t.showDetails(n)):(i=r.getBoundingClientRect().top,t.restoreFullResults(),t.selectPlayer(n)):t.showDetails(n),i){var a=r.getBoundingClientRect().top-i;Math.abs(a)>10&&window.scrollBy(0,a)}}}}),this.element.addEventListener("mouseover",function(e){if(t.settings.hovering!==!1&&!t.showingDetails){for(var r=e.target,n=null,s=null;r&&r!==document;){var i=r.getAttribute(o.DOM_ATTRIBUTES.OPPONENT_PLACEMENT),a=r.getAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT);if(i&&(n=i),a){s=a;break}r=r.parentNode}s&&t.selectPlayer(s,n)}},!1),this.element.addEventListener("mouseout",function(e){if(t.settings.hovering!==!1&&!t.showingDetails){for(var r=e.relatedTarget;r&&r!==document&&r!==t.element;)r=r.parentNode;r!==t.element&&t.selectPlayer(-1)}},!1)}}]),t}();r["default"]=T,T.DEFAULT_SETTINGS=o.DEFAULT_SETTINGS,e.exports=r["default"]},{"./parser":2,"./raw2table":4,"./settings":5,"./utils":6}],4:[function(t,e,r){"use strict";function n(t,e){if(!t)return null;var r=(0,i.defaults)(s.DEFAULT_SETTINGS,e),n=t.split(/\r\n|\n/);if(n.length<=2&&!n[0]&&!n[1])return null;var o=(0,s.toResultsWithRegExp)(r.results),a=o.length,l=document.createElement("table"),u=n.map(function(t){return t.split(r.rowSeparator)}),f=u.reduce(function(t,e){return Math.max(t,e.length)},0),c=null;"string"==typeof r.roundsColumns&&(c=r.roundsColumns.split(",").map(Number));var T=void 0;return u.forEach(function(t,e){var n=document.createElement("tr"),i=t.length;if(i){if(f>i){if(1===t.length&&!t[0]||";"===t[0][0])return;var u=document.createElement("td");u.setAttribute("colspan",f),u.textContent=t.join(" "),n.setAttribute(s.DOM_ATTRIBUTES.PLAYER_PLACEMENT,-1),n.appendChild(u)}else{var E=parseInt(t[r.placeColumn],10);e<r.startingRow||isNaN(E)&&!T?t.forEach(function(t){var e=document.createElement("td");e.textContent=t,n.setAttribute(s.DOM_ATTRIBUTES.PLAYER_PLACEMENT,-1),n.appendChild(e)}):!function(){n.setAttribute(s.DOM_ATTRIBUTES.PLAYER_PLACEMENT,T||E);var e=[];t.forEach(function(t,r){var i=document.createElement("td");if(i.textContent=t,!c||c.indexOf(r)>=0)for(var l=0;a>l;l++){var u=t.match(o[l].regexp);if(u){var f=u[1];e.push(f),i.setAttribute(s.DOM_ATTRIBUTES.OPPONENT_PLACEMENT,f),i.setAttribute(s.DOM_ATTRIBUTES.GAME_RESULT,o[l].cls)}}n.appendChild(i)}),e.length&&n.setAttribute(s.DOM_ATTRIBUTES.OPPONENTS,e.join(",")),T?T+=1:T=2}()}l.appendChild(n)}}),l.setAttribute(s.DOM_ATTRIBUTES.RESULT_TABLE,""),l}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var s=t("./settings"),i=t("./utils");e.exports=r["default"]},{"./settings":5,"./utils":6}],5:[function(t,e,r){"use strict";function n(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push({cls:r,regexp:new RegExp(t[r])});return e}function s(t){var e={};return t.hasAttribute(o.SETTING_PLACE_COLUMN)&&(e.placeColumn=Number(t.getAttribute(o.SETTING_PLACE_COLUMN))),t.hasAttribute(o.SETTING_STARTING_ROW)&&(e.startingRow=Number(t.getAttribute(o.SETTING_STARTING_ROW))),t.hasAttribute(o.SETTING_ROUNDS_COLUMNS)&&(e.roundsColumns=t.getAttribute(o.SETTING_ROUNDS_COLUMNS)),t.hasAttribute(o.SETTING_CLICKING)&&(e.clicking="false"!==t.getAttribute(o.SETTING_CLICKING)),t.hasAttribute(o.SETTING_HOVERING)&&(e.hovering="false"!==t.getAttribute(o.SETTING_HOVERING)),e}Object.defineProperty(r,"__esModule",{value:!0}),r.toResultsWithRegExp=n,r.readTableSettingsFromDOM=s;var i={prefixCls:"go-results-",showingDetailsCls:"showing-details",tableCls:"table",gameCls:"game",currentCls:"current",results:{won:"([0-9]+)\\+",lost:"([0-9]+)\\-",jigo:"([0-9]+)=",unresolved:"([0-9]+)\\?"},startingRow:0,placeColumn:0,roundsColumns:null,rowTags:"tr",cellTags:"td,th",rowSeparator:"	",hovering:!0,clicking:!0};r.DEFAULT_SETTINGS=i;var o={RESULT_TABLE:"data-go-results",SETTING_STARTING_ROW:"data-go-starting-row",SETTING_PLACE_COLUMN:"data-go-place-col",SETTING_ROUNDS_COLUMNS:"data-go-rounds-cols",SETTING_CLICKING:"data-go-clicking",SETTING_HOVERING:"data-go-hovering",PLAYER_PLACEMENT:"data-go-place",OPPONENT_PLACEMENT:"data-go-opponent",OPPONENTS:"data-go-opponents",GAME_RESULT:"data-go-result"};r.DOM_ATTRIBUTES=o},{}],6:[function(t,e,r){"use strict";function n(t){return Array.prototype.slice.call(t)}function s(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];var s=r.filter(function(t){return"object"==typeof t}).reverse(),i=s.length,o={};t:for(var a in t){for(var l=0;i>l;l++)if(s[l].hasOwnProperty(a)){o[a]=s[l][a];continue t}o[a]=t[a]}return o}function i(){for(var t={},e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];return r.forEach(function(e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),t}Object.defineProperty(r,"__esModule",{value:!0}),r.asArray=n,r.defaults=s,r.combine=i},{}]},{},[1])(1)});