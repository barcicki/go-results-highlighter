!function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){var l="function"==typeof require&&require;if(!a&&l)return l(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=(0,a.asArray)(document.querySelectorAll(e)).filter(function(e){if(r)return!0;if("TABLE"===e.nodeName){for(var t=e.rows.length,n=0;n<t;n++)for(var o=e.rows[n].cells.length,s=0;s<o;s++)if(l.test(e.rows[n].cells[s].textContent))return!0;return!1}var i=e.textContent.match(u);return i&&i.length>6});if(!n.length){var s=void 0;return s=r?prompt('Could not find any elements matching "'+e+'" selector. Do you want to provide another one?'):prompt('Could not find any tables with Go results ("'+e+'"). If you are confident that this page has one - please provide a specific selector to the element.'),void(s?o(s,t,!0):console.log("Could not find any elements with Go results."))}var c=0,g=0;n.forEach(function(e){if(e.goResultsHighlighter)return void(g+=1);var r=new i.default(e,t);r.clearInlineStyles(),c+=1}),console.log("Go Results Highlighter was applied to "+c+" DOM elements. "+g+" had Highlighter before.")}var s=e("./lib/wrapper"),i=n(s),a=e("./lib/utils");e("./styles/bookmark.less");var l=/^[^0-9]*([0-9]+[-+=?])[^-+?]*$/,u=/[0-9]+[-+?]/g;location.hostname.indexOf("europeangodatabase")!==-1?o("#tab_wallist",{placeColumn:1}):o("table, pre")},{"./lib/utils":6,"./lib/wrapper":7,"./styles/bookmark.less":8}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){var r=e.getBoundingClientRect().top-t;Math.abs(r)>10&&window.scrollBy(0,r)}function i(e){for(var t={player:null,games:null,target:null};e&&e!==document;){var r=e.getAttribute(c.DOM_ATTRIBUTES.OPPONENT_PLACEMENT),n=e.getAttribute(c.DOM_ATTRIBUTES.PLAYER_PLACEMENT);if(r&&(t.games=Number(r)),n){t.player=Number(n);break}e=e.parentNode}return t.target=e,t}function a(e){e.filter(function(e){return e.row.properNextSibling}).reverse().forEach(function(e){e.row.properNextSibling===-1?e.row.parentNode.appendChild(e.row):e.row.parentNode.insertBefore(e.row,e.row.properNextSibling),e.row.properNextSibling=null})}function l(e,t){var r=e.row.parentNode,n=e.row.nextElementSibling;t.forEach(function(t){t.row.properNextSibling=t.row.nextElementSibling||-1,t.tournamentPlace<e.tournamentPlace?r.insertBefore(t.row,e.row):(r.insertBefore(t.row,n),n=t.row.nextElementSibling)})}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./settings"),g=e("./parser"),f=n(g),h=e("./raw2table"),p=n(h),m=e("./utils"),d=function(){function e(t,r){if(o(this,e),this.settings=(0,m.defaults)(c.DEFAULT_SETTINGS,(0,c.readTableSettingsFromDOM)(t),r),t instanceof HTMLPreElement){var n=(0,p.default)(t.innerHTML,r),s=t.parentNode;s.insertBefore(n,t),s.removeChild(t),this.element=n}else this.element=t;this.element.classList&&(this.createPlayersMap(),this.bindEvents(),this.element.classList.add(this.settings.prefixCls+this.settings.tableCls),this.current=null,this.games=[],this.isRearranged=!1,this.isHighlighting=!1)}return u(e,[{key:"createPlayersMap",value:function(){this.map=(0,f.default)(this.element,this.settings),this.players=[];for(var e in this.map)this.map.hasOwnProperty(e)&&this.players.push(this.map[e])}},{key:"highlight",value:function(e){var t=this;e||(e={});var r=e.player,n=e.rearrange===!0,o=e.games,s=this.map[r],i=(0,c.toPrefixedClasses)(this.settings);this.isRearranged&&a(this.players),s&&n?(l(s,s.opponents.map(function(e){return t.map[e]})),this.element.classList.add(i.rearrangedCls),this.isRearranged=!0):(this.element.classList.remove(i.rearrangedCls),this.isRearranged=!1);var u=(0,m.asArray)(this.element.querySelectorAll("."+i.gameCls)),g=this.element.querySelector("."+i.currentCls),f=g?g.getAttribute(c.DOM_ATTRIBUTES.PLAYER_PLACEMENT):null,h=f?this.map[f]:null,p=function(e,r){var n=r?"add":"remove";e.row.classList[n](i.currentCls),e.opponents.forEach(function(r){var o=t.map[r];o.row.classList[n](t.settings.prefixCls+e.games[r].cls)})};u.forEach(function(e){e.classList.remove(i.gameCls)}),h&&h!==s&&p(h,!1),s&&s!==h&&p(s,!0),this.games.length=0,s?("number"==typeof o&&(o=[o]),o&&"number"==typeof o.length?o.forEach(function(e){var n=t.map[e],o=s.games[e];n&&o&&(o.cell.classList.add(i.gameCls),n.games[r].cell.classList.add(i.gameCls),t.games.push(e))}):this.isRearranged&&s.opponents.forEach(function(e){t.map[e].games[r].cell.classList.add(i.gameCls),t.games.push(e)}),this.current=r,this.isHighlighting=!0):(this.current=null,this.isHighlighting=!1)}},{key:"configure",value:function(e){this.highlight(null),this.element.classList.remove(this.settings.prefixCls+this.settings.tableCls),this.settings=(0,m.defaults)(this.settings,e),this.createPlayersMap(),this.element.classList.add(this.settings.prefixCls+this.settings.tableCls)}},{key:"bindEvents",value:function(){var e=this,t=!1;this.element.addEventListener("touchstart",function(){t=!1}),this.element.addEventListener("touchmove",function(){t=!0}),this.element.addEventListener("touchend",function(r){if(!(t||e.settings.rearranging===!1&&e.settings.hovering===!1)){var n=i(r.target),o=n.target,a=n.player,l=n.games;if(a){var u=!1,c=void 0;e.current===a?(e.settings.rearranging&&e.settings.hovering||(a=null),u=!e.isRearranged):!e.isRearranged&&e.settings.hovering||(u=!0),u&&(c=o.getBoundingClientRect().top),e.highlight({player:a,games:l,rearrange:u}),c&&s(o,c),r.preventDefault()}}}),this.element.addEventListener("click",function(t){if(e.settings.rearranging!==!1){var r=i(t.target),n=r.target,o=r.player,a=r.games,l=!1,u=void 0;o&&(!e.isRearranged||n.properNextSibling?l=!0:e.settings.hovering||(o=null),l&&(u=n.getBoundingClientRect().top),e.highlight({player:o,games:a,rearrange:l}),u&&s(n,u))}}),this.element.addEventListener("mouseover",function(t){if(e.settings.hovering!==!1){var r=i(t.target),n=r.player,o=r.games,s=e.isRearranged;if(n){if(e.isRearranged){if((!o||n!==e.current)&&e.games.length===e.map[e.current].opponents.length)return;n!==e.current&&(n=e.current,o=null)}e.highlight({player:n,rearrange:s,games:o})}}},!1),this.element.addEventListener("mouseout",function(t){if(e.settings.hovering!==!1){for(var r=t.relatedTarget;r&&r!==document&&r!==e.element;)r=r.parentNode;r!==e.element&&(e.isRearranged&&e.games.length!==e.map[e.current].opponents.length?e.highlight({player:e.current,rearrange:!0}):e.isRearranged||e.highlight(null))}},!1)}},{key:"clearInlineStyles",value:function(){this.players.forEach(function(e){(0,m.asArray)(e.row.childNodes).forEach(function(e){return e.removeAttribute("style")})})}}]),e}();r.default=d,d.DEFAULT_SETTINGS=c.DEFAULT_SETTINGS},{"./parser":3,"./raw2table":4,"./settings":5,"./utils":6}],3:[function(e,t,r){"use strict";function n(e,t){e.setAttribute(d.DOM_ATTRIBUTES.PLAYER_PLACEMENT,t)}function o(e,t){return e.reduce(function(e,r){return(0,m.asArray)(r.querySelectorAll(t)).forEach(function(t,r){var n=e[r];n||(n=[],e[r]=n),n.push(t.textContent)}),e},[])}function s(e,t){return e.filter(function(e){return t.some(function(t){return e.match(t.regexp)})})}function i(e,t){var r=e.length,n=s(e,t).length;return n/r>=.4}function a(e,t,r){return o(e,t).reduce(function(e,t,n){return i(t,r)&&e.push(n),e},[])}function l(e){return function(t,r){return e.indexOf(r)!==-1}}function u(e,t,r){if("string"==typeof t.roundsColumns){var n=t.roundsColumns.split(",").map(Number);return l(n)}if(!t.checkColumnsForResults)return function(){return!0};var o=a(e,t.cellTags,r);return l(o)}function c(e,t){var r=(0,d.nameHeadersToRegExp)(t.nameColumnHeaders),n=[],s=o(e,t.headerTags);return s.forEach(function(e,t){e.some(function(e){return r.some(function(t){return e.match(t)})})&&n.push(t)}),n}function g(e,t,r){r=r||.4;var n=e.length,o=e.filter(function(e){return t(e)}).length;return o/n>=r}function f(e,t){if(!t.nameCellExpression)return[];var r=new RegExp(t.nameCellExpression),n=function(e){return e.match(r)};return o(e,t.cellTags).reduce(function(e,t,r){return g(t,n)&&e.push(r),e},[])}function h(e,t){var r=[];return"string"==typeof t.nameColumns?r=t.nameColumns.split(",").map(Number):(0,m.isNumber)(t.nameColumns)?r.push(parseInt(t.nameColumns)):t.checkColumnsForPlayerNames&&(r=c(e,t),r&&0!=r.length||(r=f(e,t))),l(r)}function p(e,t){function r(e,t){t.forEach(function(t){var r=void 0,n=void 0;if(t.hasAttribute(d.DOM_ATTRIBUTES.GAME_RESULT)&&t.hasAttribute(d.DOM_ATTRIBUTES.OPPONENT_PLACEMENT))r=Number(t.getAttribute(d.DOM_ATTRIBUTES.OPPONENT_PLACEMENT)),n=t.getAttribute(d.DOM_ATTRIBUTES.GAME_RESULT);else{for(var l=0;l<a;l++){var u=t.textContent.match(i[l].regexp);if(u){if(r=Number(u[1]),n=i[l].cls,r<=0||!o.ignoreOutOfBoundsRows&&r>s.length)return;t.setAttribute(d.DOM_ATTRIBUTES.OPPONENT_PLACEMENT,r),t.setAttribute(d.DOM_ATTRIBUTES.GAME_RESULT,i[l].cls)}}if(!r)return}e.games[r]={cell:t,cls:n},e.opponents.push(r)})}var o=(0,m.defaults)(d.DEFAULT_SETTINGS,t),s=(0,m.asArray)(e.querySelectorAll(o.rowTags)),i=(0,d.toResultsWithRegExp)(o.results),a=i.length,l=u(s,o,i),c=o.displayOpponentNameHint?h(s,o):function(e,t){return!1},g=[],f=void 0,p=void 0;return s.forEach(function(e,t){if(!(t<o.startingRow)){var r=(0,m.asArray)(e.querySelectorAll(o.cellTags)),s=r.filter(c),i=s.map(function(e){return e.textContent}).join(" "),a=-1;if(!r.length||!r[o.placeColumn])return void n(e,a);var l=parseInt(r[o.placeColumn].textContent,10),u={tournamentPlace:-1,row:e,games:{},opponents:[],name:i};if(e.hasAttribute(d.DOM_ATTRIBUTES.PLAYER_PLACEMENT))a=Number(e.getAttribute(d.DOM_ATTRIBUTES.PLAYER_PLACEMENT));else{if(p)a=p+1;else{if(isNaN(l))return void n(e,a);a=l||1}l?l<=f&&(l=f):l=f?f:1,n(e,a)}a!=-1&&(u.tournamentPlace=l,g[a]=u,f=l,p=a)}}),g.forEach(function(e){var t=(0,m.asArray)(e.row.querySelectorAll(o.cellTags)),n=t.filter(l);r(e,n),e.opponents.sort(function(e,t){return e>t?1:-1})}),(0,m.arrayToObject)(g)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=p;var m=e("./utils"),d=e("./settings")},{"./settings":5,"./utils":6}],4:[function(e,t,r){"use strict";function n(e,t){var r=document.createElement("table");if(!e)return r;var n=(0,s.defaults)(o.DEFAULT_SETTINGS,t),i=e.replace(/<br[^>]*>/gi,"\n").replace(/<\/?code[^>]*>/gi,"").split(/\r\n|\n/);if(i.length<=2&&!i[0]&&!i[1])return r;var a=(0,o.toResultsWithRegExp)(n.results),l=a.length,u=i.map(function(e){return e.replace(/([0-9]+)\s(dan|kyu)/i,"$1_$2").split(new RegExp(n.cellSeparator)).filter(function(e){return e.length>0})}).filter(function(e){return e.length>0&&0!==e[0].indexOf(";")}),c=u.reduce(function(e,t){return Math.max(e,t.length)},0),g=n.joinNames?-1:0,f=n.placeColumn+1,h=null;"string"==typeof n.roundsColumns&&(h=n.roundsColumns.split(",").map(Number));var p=void 0;return u.forEach(function(e,t){var s=document.createElement("tr"),i=e.length;if(i){if(t<n.startingRow||i<c+g){var u=document.createElement("td");u.setAttribute("colspan",c+g),u.textContent=e.join(" "),s.setAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT,-1),s.appendChild(u)}else{var m=parseInt(e[n.placeColumn],10);isNaN(m)&&!p?e.forEach(function(e){var t=document.createElement("td");t.textContent=e,s.setAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT,-1),s.appendChild(t)}):!function(){s.setAttribute(o.DOM_ATTRIBUTES.PLAYER_PLACEMENT,p||m);var t=[];n.joinNames&&e.splice(f,2,e[f]+"  "+e[f+1]),e.forEach(function(e,r){var n=document.createElement("td");if(n.textContent=e.replace(/_/," "),!h||h.indexOf(r)>=0)for(var i=0;i<l;i++){var u=e.match(a[i].regexp);if(u){var c=u[1];t.push(c),n.setAttribute(o.DOM_ATTRIBUTES.OPPONENT_PLACEMENT,c),n.setAttribute(o.DOM_ATTRIBUTES.GAME_RESULT,a[i].cls)}}s.appendChild(n)}),t.length&&s.setAttribute(o.DOM_ATTRIBUTES.OPPONENTS,t.join(",")),p?p+=1:p=2}()}r.appendChild(s)}}),r.setAttribute(o.DOM_ATTRIBUTES.RESULT_TABLE,""),r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("./settings"),s=e("./utils")},{"./settings":5,"./utils":6}],5:[function(e,t,r){"use strict";function n(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({cls:r,regexp:new RegExp(e[r])});return t}function o(e){return e&&0!=e.length?e.map(function(e){return new RegExp(e,"i")}):[]}function s(e){var t={};return a.forEach(function(r){t[r]=e.prefixCls+e[r]}),t}function i(e){var t={};return e.hasAttribute(l.SETTING_PLACE_COLUMN)&&(t.placeColumn=Number(e.getAttribute(l.SETTING_PLACE_COLUMN))),e.hasAttribute(l.SETTING_STARTING_ROW)&&(t.startingRow=Number(e.getAttribute(l.SETTING_STARTING_ROW))),e.hasAttribute(l.SETTING_ROUNDS_COLUMNS)&&(t.roundsColumns=e.getAttribute(l.SETTING_ROUNDS_COLUMNS)),e.hasAttribute(l.SETTING_REARRANGING)&&(t.rearranging="false"!==e.getAttribute(l.SETTING_REARRANGING)),e.hasAttribute(l.SETTING_HOVERING)&&(t.hovering="false"!==e.getAttribute(l.SETTING_HOVERING)),t}Object.defineProperty(r,"__esModule",{value:!0}),r.toResultsWithRegExp=n,r.nameHeadersToRegExp=o,r.toPrefixedClasses=s,r.readTableSettingsFromDOM=i;var a=(r.DEFAULT_SETTINGS={prefixCls:"go-results-",rearrangedCls:"rearranged",tableCls:"table",gameCls:"game",currentCls:"current",results:{won:"([0-9]+)\\+",lost:"([0-9]+)\\-",jigo:"([0-9]+)=",unresolved:"([0-9]+)\\?"},startingRow:0,placeColumn:0,roundsColumns:null,nameColumns:null,nameColumnHeaders:[],nameCellExpression:"(?=^.*[A-Z][a-z]{3,})(?!.*([Kk][yy][uu]|[Dd][Aa][Nn]))",rowTags:"tr",cellTags:"td",headerTags:"th",ignoreOutOfBoundsRows:!1,checkColumnsForResults:!0,displayOpponentNameHint:!0,checkColumnsForPlayerNames:!0,cellSeparator:"[\t ]+",joinNames:!0,hovering:!0,rearranging:!0},["rearrangedCls","tableCls","gameCls","currentCls"]),l=r.DOM_ATTRIBUTES={RESULT_TABLE:"data-go-results",SETTING_STARTING_ROW:"data-go-starting-row",SETTING_PLACE_COLUMN:"data-go-place-column",SETTING_ROUNDS_COLUMNS:"data-go-rounds-columns",SETTING_REARRANGING:"data-go-rearranging",SETTING_HOVERING:"data-go-hovering",PLAYER_PLACEMENT:"data-go-place",OPPONENT_PLACEMENT:"data-go-opponent",OPPONENT_NAME:"data-go-name",OPPONENTS:"data-go-opponents",GAME_RESULT:"data-go-result"}},{}],6:[function(e,t,r){"use strict";function n(e){return Array.prototype.slice.call(e)}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r.filter(function(e){return"object"===("undefined"==typeof e?"undefined":l(e))}).reverse(),s=o.length,i={};e:for(var a in e){for(var u=0;u<s;u++)if(o[u].hasOwnProperty(a)){i[a]=o[u][a];continue e}i[a]=e[a]}return i}function s(){for(var e={},t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}),e}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var t={},r=0;r<e.length;r++)t[r]=e[r];return t}Object.defineProperty(r,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};r.asArray=n,r.defaults=o,r.combine=s,r.isNumber=i,r.arrayToObject=a},{}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(this instanceof o))return new o(e,t);var r=new l.default(e,t);this.highlight=function(e,t,n){"object"===("undefined"==typeof e?"undefined":i(e))?r.highlight(e):("boolean"==typeof t&&(n=t,t=null),r.highlight({player:e,rearrange:n,games:t}))},this.configure=function(e){r.configure(e)},this.opponents=function(e){var t=r.map[e];return t?t.opponents.slice():[]},this.clearInlineStyles=function(){r.clearInlineStyles()},Object.defineProperties(this,{element:s(function(){return r.element}),isHighlighting:s(function(){return r.isHighlighting}),isRearranged:s(function(){return r.isRearranged}),player:s(function(){return r.current||null}),players:s(function(){return r.players.length}),games:s(function(){return r.games}),configuration:s(function(){var e=r.settings.results,t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return{startingRow:r.settings.startingRow,placeColumn:r.settings.placeColumn,roundsColumns:r.settings.roundsColumns,prefixCls:r.settings.prefixCls,rearrangedCls:r.settings.rearrangedCls,tableCls:r.settings.tableCls,gameCls:r.settings.gameCls,currentCls:r.settings.currentCls,rowTags:r.settings.rowTags,cellTags:r.settings.cellTags,cellSeparator:r.settings.cellSeparator,joinNames:r.settings.joinNames,ignoreOutOfBoundsRows:r.settings.ignoreOutOfBoundsRows,checkColumnsForResults:r.settings.checkColumnsForResults,results:t}}),rearranging:{set:function(e){!e&&r.isRearranged&&r.highlight(null),r.settings.rearranging=!!e},get:function(){return r.settings.rearranging},configurable:!1,enumerable:!0},hovering:{set:function(e){return r.settings.hovering=!!e},get:function(){return r.settings.hovering},configurable:!1,enumerable:!0}}),r.element.goResultsHighlighter=this}function s(e){return{get:e,enumerable:!0,configurable:!1}}Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=e("./highlighter"),l=n(a);r.default=o},{"./highlighter":2}],8:[function(e,t,r){!function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";var r=".go-results-rearranged{color:#dddddd !important;cursor:pointer !important}.go-results-current{background-color:#d2d2d2 !important;color:#000000 !important;cursor:pointer !important}.go-results-current .go-results-game{background-color:#a7a7a7 !important}.go-results-won{background-color:#799B29 !important;color:#000000 !important}.go-results-won .go-results-game{background-color:#5A6A2C !important;color:#ffffff !important}.go-results-lost{background-color:#D97962 !important;color:#000000 !important}.go-results-lost .go-results-game{background-color:#A5422B !important;color:#ffffff !important}.go-results-jigo{background-color:#D7C3D1 !important;color:#000000 !important}.go-results-jigo .go-results-game{background-color:#9E7593 !important}.go-results-unresolved{background-color:#CBDCE5 !important;color:#000000 !important}.go-results-unresolved .go-results-game{background-color:#7D9CAD !important}";t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r)),e.appendChild(t)}()},{}]},{},[1]);